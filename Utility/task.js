//CREATOR JY//CREATED 2017-06-22//UPDATED 2017-06-22//VERSION 1.0try{	$.evalFile('/Users/' + $.getenv('USER') + '/Library/Preferences/Adobe InDesign/Version 11.0/en_US/Scripts/Scripts Panel/team scripts/Jason/Utility/console.js');	}catch(e){		$.evalFile('/Volumes/user_files/15 User Files/0 - SCRIPTS/digitalReader/scripts/console.js');	}start_log();var prod_folder = Folder('/Volumes/BEC/15 User Files/INDD SCRIPTS/primitive/_JY_BU/JasonONE_DRIVE_UNSORTED/OneDrive - Benchmark Education/projects/_archive/eld_trs_ca/prod');var package_folders = prod_folder.getFiles('X*');var replacement = {regex: /data-type="html">(.|\n)*?Unit\s*Presentation(.|\n)*?<\/a>/g, string: 'data-type="ebook">Unit Presentation</a>'}var l = package_folders.length;for(var x = 0; x < l; x++){	var package_folder = package_folders[x];	var html_folder = package_folder.getFiles('html')[0];	var grade_folder = html_folder.getFiles('grade*')[0];	var unit_folder = grade_folder.getFiles('unit*')[0];	var lessons_html_folder = Folder(unit_folder+'/lessons');	if(lessons_html_folder.exists){		process_lesson_folders(lessons_html_folder);	}else{		throw 'cannot find folder: '+lessons_html_folder;	}}function process_lesson_folders(lessons_html_folder){	var lesson_files = lessons_html_folder.getFiles('*.html');	var l = lesson_files.length;	for(var x = 0; x < l; x++){		var lesson_file = lesson_files[x];		lesson_file.open('r');		var lesson_file_text = lesson_file.read();		lesson_file.close();		if(!!lesson_file_text.match(replacement.regex)){			lesson_file_text = lesson_file_text.replace(replacement.regex, replacement.string);						if(!!lesson_file_text.match(/data-type="ebook">(.|\n)*?Unit\s*Presentation(.|\n)*?<\/a>/)){				lesson_file.open('w');				lesson_file.write(lesson_file_text);				lesson_file.close();				log('replacement success for file: '+lesson_file);			}		}else{			log('WARNING: cannot find unit presentation in file: '+lesson_file);		}	}}(function(){	 	})();alert('Complete');end_log();